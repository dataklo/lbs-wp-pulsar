# /etc/pv-tools/wp.env
# Konfiguration für wp_pulser (ENV Overrides)
# Tipp: Datei nach /etc/pv-tools/wp.env kopieren und Werte anpassen.

# --- Grundsätzlich ---
PYTHONUNBUFFERED=1

# --- Modbus / Venus ---
VENUS_IP=192.168.41.101
VENUS_PORT=502
MODBUS_TIMEOUT_S=2.0

# --- Heatpump (einziger Messwert für wp_pulser) ---
HP_UNIT_ID=31
REG_HP_POWER_U32=5502
# Wenn HP Werte unsinnig sind: "little" testen
HP_WORDORDER=big

# --- Puls-Parameter ---
# Impulse pro kWh (z.B. 100 Imp/kWh => 10 Wh pro Impuls)
IMP_PER_KWH=100
# Optional: Deckelung (alles darüber wird als MAX_POWER_W dargestellt)
MAX_POWER_W=25000

# --- Shelly (Relais, das gepulst wird) ---
SHELLY_IP=192.168.41.124
SHELLY_RELAY_IDX=2
# optional: komplette URL überschreiben (wenn du kein Standard-Schema nutzt)
# SHELLY_ON_URL=http://192.168.41.124/relay/2?turn=on

# Shelly Timing / Robustheit
MIN_TRIGGER_INTERVAL_S=0.080
HTTP_CONNECT_TIMEOUT_S=2.0
HTTP_READ_TIMEOUT_S=2.0
SHELLY_RETRIES=1
RETRY_DELAY_S=0.2

# --- Loop / Logging ---
POLL_INTERVAL_S=0.2
LOG_EVERY_S=5.0
ALPHA_AVG=0.90
