# /etc/pv-tools/pv.env
# Konfiguration f체r pv_pulser (ENV Overrides)
# Tipp: Datei nach /etc/pv-tools/pv.env kopieren und Werte anpassen.

# --- Grunds채tzlich ---
PYTHONUNBUFFERED=1

# --- Modbus / Venus ---
VENUS_IP=192.168.41.101
VENUS_PORT=502
MODBUS_TIMEOUT_S=2.0

# com.victronenergy.system (typischerweise Unit-ID 100)
SYSTEM_UNIT_ID=100

# PV Register (L1/L2/L3) (uint16)
REG_PV_L1_W=811
REG_PV_L2_W=812
REG_PV_L3_W=813

# --- Puls-Parameter ---
# Impulse pro kWh (bei 150 Imp/kWh ~ 6.666 Wh pro Impuls)
IMP_PER_KWH=150
# Optional: Deckelung (alles dar체ber wird als MAX_POWER_W dargestellt)
MAX_POWER_W=25000

# --- Shelly (Relais, das gepulst wird) ---
SHELLY_IP=192.168.41.124
SHELLY_RELAY_IDX=0
# optional: komplette URL 체berschreiben (wenn du kein Standard-Schema nutzt)
# SHELLY_ON_URL=http://192.168.41.124/relay/0?turn=on

# Shelly Timing / Robustheit
MIN_TRIGGER_INTERVAL_S=0.080
HTTP_CONNECT_TIMEOUT_S=2.0
HTTP_READ_TIMEOUT_S=2.0
SHELLY_RETRIES=1
RETRY_DELAY_S=0.2

# --- Loop / Logging ---
POLL_INTERVAL_S=0.2
LOG_EVERY_S=5.0
ALPHA_AVG=0.90
